
(function($){$.fn.rsLiteMenu=function(options){if(!Array.prototype.indexOf){Array.prototype.indexOf=function(obj,start){for(var i=(start||0);i<this.length;i++){if(this[i]===obj){return i;}}
return-1;}}
var opts=$.extend({},$.fn.rsLiteMenu.defaults,options),openSubMenus={stackObjs:[],stackHidden:[],push:function(element,hidden){this.stackObjs.push(element);this.stackHidden.push(hidden);},pop:function(){if(this.stackObjs.length==0){return null;}else{this.stackHidden.pop();return this.stackObjs.pop();}},setVisible:function(element){var index=this.stackObjs.indexOf(element);if(index==-1){this.push(element,false);opts.onShowSubmenu($(element));}else{this.stackHidden[index]=false;}},setHidden:function(element){var index=this.stackObjs.indexOf(element);if(index>-1){this.stackHidden[index]=true;if(index==this.stackObjs.length-1){while(index>-1&&this.stackHidden[index]){opts.onHideSubmenu($(this.stackObjs[index--]));this.pop();}}}}},showSubMenuFromLI=function(liElement){var ulOlElements=$("ul, ol",liElement);if(ulOlElements.length>0){openSubMenus.setVisible(ulOlElements.first()[0]);}},hideSubMenuFromULorOL=function(ulOlElement){openSubMenus.setHidden(ulOlElement);},hideSubMenuFromLI=function(liElement){var ulOlElements=$("ul, ol",liElement);if(ulOlElements.length>0){hideSubMenuFromULorOL(ulOlElements.first()[0]);}};return this.each(function(){var menuCtrl=$(this);$("ul, ol",menuCtrl).hide().mouseleave(function(){hideSubMenuFromULorOL(this);});$("li",menuCtrl).mouseenter(function(){showSubMenuFromLI(this);}).mouseleave(function(){hideSubMenuFromLI(this);});});};$.fn.rsLiteMenu.defaults={onShowSubmenu:function(element){element.show();},onHideSubmenu:function(element){element.hide();}};})(jQuery);